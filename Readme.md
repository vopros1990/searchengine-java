<h1>Search Engine Java (v1.0-SNAPSHOT)</h1>

<p>Данное приложение является полноценным поисковым движком для индексации 
веб сайтов. Код написан на Java с использованием Spring Boot Framework.</p>

<h2 id="info">Что умеет данное веб приложение:</h2>
- Выполняет обход страниц сайтов, указанных в конфигурационном файле (см. раздел <a href="#config" title="Конфигурация программы">"Конфигурация программы"</a>)
- Создает поисковые индексы всех найденных страниц
- Создает поисковый индекс для отдельной страницы
- Показывает общую статистику индексации
- Предоставляет возможность поиска по страницам проиндексированных сайтов

<h2 id="config">Конфигурация программы</h2>
<p>Для работы приложения требуется JDK v17 и выше. 
На более ранних версиях работоспособность программы не проверялась.
Также требуется установленный mySQL v8.20. 
Возможно, программа будет работать и с более ранними версиями базы данных mySQL.</p>

<h2 id="api">API команды</h2>
<h3 id="api_indexing">ИНДЕКСАЦИЯ</h3>
<h4>Запуск полной индексации сайтов, указанных в конфигурационном файле</h4>
<code style="background-color: yellow; color: green">GET /api/startIndexing</code>
```json
/* ФОРМАТ ОТВЕТА */

{
  'result': true, //в случае успешного запуска
  'error': "error message" //сообщениие об ошибке в случае, если result: false
}
```
<h4>Остановка индексации всех сайтов:</h4>
<code style="background-color: yellow; color: green">GET /api/stopIndexing</code>
```json
/* ФОРМАТ ОТВЕТА */

{
  'result': true, //в случае успешного запуска
  'error': "error message" //сообщениие об ошибке в случае, если result: false
}
```
<h4>Запуск индексации отдельной страницы сайта из числа указанных в конфигурационном файле</h4>
<code style="background-color: yellow; color: green">POST /api/indexPage</code>
```json
/* ПАРАМЕТРЫ POST ЗАПРОСА */

{
  'url': "https://example.com/site-page/" //адрес страницы
}

/* ФОРМАТ ОТВЕТА */

{
  'result': true, //в случае успешного запуска
  'error': "error message" //сообщениие об ошибке в случае, если result: false
}
```
<h3 id="api_statistics">СТАТИСТИКА</h3>
<h4>Получения информации о созданных поисковых индексах и состоянии поискового движка</h4>
<code style="background-color: yellow; color: green">GET /api/statistics</code>
```json
/* ФОРМАТ ОТВЕТА В СЛУЧАЕ УСПЕХА */

{
  'result': true,
  'statistics': {
    "total": {
      "sites": 10,
      "pages": 436423,
      "lemmas": 5127891,
      "indexing": true
    },
    "detailed": [
      {
        "url": "http://www.example.com/",
        "name": "Имя сайта",
        "status": "INDEXED", // INDEXING, INDEXED, FAILED
        "statusTime": 1600160357,
        "error": "error message",
        "pages": 5764,
        "lemmas": 321115
      },
      ...
    ]
}
```
<h3 id="api_search">ПОИСК</h3>
<h4>Поиск по страницам проиндексированных сайтов</h4>
<code style="background-color: yellow; color: green">GET /api/search?{params}</code>
<h4>Параметры запроса:</h4>
- <b>query</b> — поисковый запрос;
- <b>site</b> — сайт, по которому осуществлять поиск (без слшэша в конце). Необязательный параметр. Если его не указать, поиск будет выполнен по страницам всех проиндексированных сайтов;
- <b>offset</b> — сдвиг от 0 для постраничного вывода (параметр
необязательный; если не установлен, то значение по умолчанию равно
нулю);
- <b>limit</b> — количество результатов, которое необходимо вывести (параметр
необязательный; если не установлен, то значение по умолчанию равно 20).
```json
/* ФОРМАТ ОТВЕТА В СЛУЧАЕ УСПЕХА */

{
  'result': true,
  'statistics': {
    "total": {
      "sites": 10,
      "pages": 436423,
      "lemmas": 5127891,
      "indexing": true
    },
    "detailed": [
      {
        "url": "http://www.example.com/",
        "name": "Имя сайта",
        "status": "INDEXED", // INDEXING, INDEXED, FAILED
        "statusTime": 1600160357,
        "error": "error message",
        "pages": 5764,
        "lemmas": 321115
      },
      ...
    ]
}
```

<h2 id="run-local">Как запустить на локальном сервере</h2>

<h2>Особенности работы приложения</h2>
<h3>Модуль лемматзации</h3>
Программа использует технологию приведения слов к их 
морфологической базовой форме. Для работы данной функции требуется подключить библиотеку
<b>Lucene Morphology</b>. 

<p>Данное решение достаточно требовательно к ресурсам сервера - оперативной памяти и CPU.
Поэтому во время индексации сайтов все данные модуля лемматизатора кешируются в оперативной памяти, 
а также сохраняется в базе данных. При перезапуске приложения кеш загружается
обратно в оперативную память.</p>